<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="robots" content="noindex, nofollow">

    <title>Selenify</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }

        body, html {
            margin: 0; padding: 0;
            width: 100%;
            height: 100%;
            font-family: 'Segoe UI', sans-serif;
            color: white;
            overflow: hidden;
            position: fixed;
            overscroll-behavior: none;
        }

        .background {
            position: fixed; top: 0; left: 0;
            width: 100%; height: 100%;
            background: url('image.png') no-repeat center center;
            background-size: cover;
            z-index: -1;
            transition: background-image 0.5s ease-in-out;
        }

        .container {
            display: flex; flex-direction: column;
            align-items: center; justify-content: center;
            height: 100vh;
            height: 100dvh;
            background: rgba(0, 0, 0, 0.2);
            padding: 20px;
        }

        .album-box {
            width: 80vw;
            max-width: 320px;
            aspect-ratio: 1 / 1;
            border: 1px solid rgba(255, 255, 255, 0.3);
            padding: 8px;
            margin-bottom: 25px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
        }

        .album-art {
            width: 100%; height: 100%;
            background-size: cover; background-position: center;
            border-radius: 2px;
            transition: 0.5s ease-in-out;
        }

        .player-wrapper {
            width: 100%;
            max-width: 400px;
            text-align: center;
        }

        .song-info h2 { margin: 0; font-size: 24px; font-weight: 600; text-shadow: 0 2px 10px rgba(0,0,0,0.8); }
        .song-info p { margin: 5px 0 25px; opacity: 0.7; font-size: 17px; }

        /* Progress Bar */
        .progress-container {
            display: flex; align-items: center;
            font-size: 13px; margin-bottom: 30px; gap: 12px;
            padding: 0 5px;
        }

        .progress-bar-bg {
            flex: 1; height: 5px; background: rgba(255, 255, 255, 0.2);
            border-radius: 3px; cursor: pointer; position: relative;
        }

        #progress {
            height: 100%; background: white; width: 0%;
            border-radius: 3px; position: relative;
        }

        /* Kumanda ButonlarÄ± */
        .controls {
            display: flex; justify-content: space-between; align-items: center;
            width: 100%; padding: 0 5px;
        }

        .btn {
            background: none; border: none; color: white;
            cursor: pointer; font-size: 24px; opacity: 0.8;
            transition: 0.2s;
        }

        .play-pause-btn {
            width: 75px; height: 75px;
            background: white; color: black !important;
            border-radius: 50%; font-size: 32px;
            display: flex; justify-content: center; align-items: center;
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
        }

        .btn.active { color: #1DB954; opacity: 1; }

        .footer-icons {
            display: flex; justify-content: space-between;
            width: 100%; margin-top: 35px; opacity: 0.5; font-size: 20px;
        }

        /* Mobil Responsive Ayarlar */
        @media (max-width: 480px) {
            .album-box { width: 85vw; }
            .btn { font-size: 28px; }
            .play-pause-btn { width: 85px; height: 85px; font-size: 38px; }
            .song-info h2 { font-size: 26px; }
        }

        /* ========================= */
        /* âœ… PLAYLIST PANEL (EK)     */
        /* ========================= */
        .playlist-panel {
            position: fixed;
            left: 0;
            right: 0;
            bottom: -100%;
            height: 70%;
            background: rgba(0,0,0,0.92);
            backdrop-filter: blur(14px);
            border-radius: 22px 22px 0 0;
            z-index: 9999;
            transition: bottom 0.35s ease;
            padding: 16px 16px 10px;
            overflow: hidden;
        }
        .playlist-panel.show { bottom: 0; }

        .playlist-header {
            display: flex;
            align-items: center;
            justify-content: space-between;
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 10px;
        }

        .playlist-list {
            height: calc(100% - 46px);
            overflow-y: auto;
            -webkit-overflow-scrolling: touch;
            padding-right: 6px;
        }

        .pl-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 10px 6px;
            border-bottom: 1px solid rgba(255,255,255,0.08);
            cursor: pointer;
        }

        .pl-item img {
            width: 46px;
            height: 46px;
            border-radius: 6px;
            object-fit: cover;
            flex: 0 0 auto;
        }

        .pl-text {
            text-align: left;
            line-height: 1.2;
            flex: 1;
        }
        .pl-text .t { font-weight: 600; font-size: 15px; }
        .pl-text .a { opacity: 0.7; font-size: 13px; margin-top: 3px; }

        .pl-item.active {
            color: #1DB954;
        }

        .pl-close {
            opacity: 0.75;
            cursor: pointer;
            font-size: 20px;
        }

        /* Panel aÃ§Ä±kken arkaya tÄ±klama olmasÄ±n */
        .overlay-lock {
            position: fixed;
            inset: 0;
            background: rgba(0,0,0,0.25);
            z-index: 9998;
            opacity: 0;
            pointer-events: none;
            transition: opacity 0.2s ease;
        }
        .overlay-lock.show {
            opacity: 1;
            pointer-events: auto;
        }
    </style>
</head>
<body>

<div class="background"></div>
<audio id="main-audio"></audio>

<div class="container">
    <div class="album-box">
        <div id="art" class="album-art"></div>
    </div>

    <div class="player-wrapper">
        <div class="song-info">
            <h2 id="title">Yükleniyor...</h2>
            <p id="artist">Sanatçı</p>
        </div>

        <div class="progress-container">
            <span id="current-time">0:00</span>
            <div class="progress-bar-bg" id="progress-box">
                <div id="progress"></div>
            </div>
            <span id="duration">0:00</span>
        </div>

        <div class="controls">
            <button class="btn"><i class="fas fa-random"></i></button>
            <button class="btn" onclick="prevSong()"><i class="fas fa-step-backward"></i></button>
            <button class="btn play-pause-btn" onclick="togglePlay()">
                <i id="playIcon" class="fas fa-play"></i>
            </button>
            <button class="btn" onclick="nextSong()"><i class="fas fa-step-forward"></i></button>
            <button class="btn" id="repeatBtn" onclick="toggleRepeat()"><i class="fas fa-redo"></i></button>
        </div>

        <div class="footer-icons">
            <i class="fas fa-laptop"></i>
            <!-- âœ… BURAYA id EKLEDÄ°K -->
            <i id="openPlaylistBtn" class="fas fa-list-ul"></i>
        </div>
    </div>
</div>

<!-- âœ… EK: Overlay + Playlist Panel -->
<div id="overlayLock" class="overlay-lock"></div>

<div id="playlistPanel" class="playlist-panel">
    <div class="playlist-header">
        <span>Selenify</span>
        <i id="closePlaylistBtn" class="fas fa-times pl-close"></i>
    </div>
    <div id="playlistList" class="playlist-list"></div>
</div>

<script>
    const audio = document.getElementById('main-audio');
    const playIcon = document.getElementById('playIcon');
    const progressBar = document.getElementById('progress');
    const progressBox = document.getElementById('progress-box');
    const repeatBtn = document.getElementById('repeatBtn');
    const backgroundEl = document.querySelector('.background');

    // âœ… id'leri dÃ¼zgÃ¼n alalÄ±m (hyphen var!)
    const currentTimeEl = document.getElementById('current-time');
    const durationEl = document.getElementById('duration');

    // âœ… Playlist panel elemanlarÄ±
    const playlistPanel = document.getElementById('playlistPanel');
    const playlistListEl = document.getElementById('playlistList');
    const openPlaylistBtn = document.getElementById('openPlaylistBtn');
    const closePlaylistBtn = document.getElementById('closePlaylistBtn');
    const overlayLock = document.getElementById('overlayLock');

    let isRepeat = false;
    let index = 0;

    // ÅARKILARINI BURAYA EKLE (Dosya yollarÄ± doÄŸru olmalÄ±)
    const playlist = [
        { title: "Sen", artist: "24.06.2025", img: "images/img3.jpeg", bg: "images/image1.png", src: "music/sarki1.mp3" },
        { title: "Hayatım", artist: "02.12.2025", img: "images/img2.jpeg", bg: "images/image2.png", src: "music/sarki2.mp3" },
        { title: "Boyunca", artist: "19.08.2025", img: "images/img1.jpeg", bg: "images/image3.png", src: "music/sarki3.mp3" },
        { title: "Duyduğum", artist: "06.01.2026", img: "images/img4.jpeg", bg: "images/image4.png", src: "music/sarki4.mp3" },
        { title: "Dinlemekten", artist: "01.01.2026", img: "images/img5.jpeg", bg: "images/image5.png", src: "music/sarki5.mp3" },
        { title: "Hiç", artist: "27.12.2025", img: "images/img6.jpeg", bg: "images/image6.png", src: "music/sarki6.mp3" },
        { title: "Vazgeçmeyeceğim", artist: "02.12.2025", img: "images/img7.jpeg", bg: "images/image7.png", src: "music/sarki7.mp3" },
        { title: "En", artist: "19.08.2025", img: "images/img8.jpeg", bg: "images/image8.png", src: "music/sarki8.mp3" },
        { title: "Güzel", artist: "22.09.2025", img: "images/img9.jpeg", bg: "images/image9.png", src: "music/sarki9.mp3" },
        { title: "Sen benim hayatım boyunca duyduğum ve dinlemekten hiç vazgeçmeyeceğim en güzel şarkısın.", artist: "Galaxy", img: "images/img10.jpeg", bg: "images/image10.png", src: "music/sarki10.m4a" },
    ];

    function formatTime(sec) {
        if (!isFinite(sec) || sec < 0) return "0:00";
        const m = Math.floor(sec / 60);
        const s = Math.floor(sec % 60);
        return `${m}:${s < 10 ? '0' + s : s}`;
    }

    function loadSong(song) {
        document.getElementById('title').innerText = song.title;
        document.getElementById('artist').innerText = song.artist;
        document.getElementById('art').style.backgroundImage = `url('${song.img}')`;
        backgroundEl.style.backgroundImage = `url('${song.bg || "image.png"}')`;

        // âœ… src deÄŸiÅŸtir
        audio.src = song.src;

        // âœ… progress reset
        progressBar.style.width = "0%";
        currentTimeEl.innerText = "0:00";
        durationEl.innerText = "0:00";

        // âœ… listede aktif iÅŸaretle
        setActivePlaylistItem();
    }

    function togglePlay() {
        if (audio.paused) {
            audio.play();
            playIcon.className = "fas fa-pause";
        } else {
            audio.pause();
            playIcon.className = "fas fa-play";
        }
    }

    function toggleRepeat() {
        isRepeat = !isRepeat;
        repeatBtn.classList.toggle('active', isRepeat);
    }

    function nextSong() {
        index = (index + 1) % playlist.length;
        loadSong(playlist[index]);
        audio.play();
        playIcon.className = "fas fa-pause";
    }

    function prevSong() {
        index = (index - 1 + playlist.length) % playlist.length;
        loadSong(playlist[index]);
        audio.play();
        playIcon.className = "fas fa-pause";
    }

    audio.addEventListener('timeupdate', () => {
        if (!isFinite(audio.duration) || audio.duration === 0) return;

        const percent = (audio.currentTime / audio.duration) * 100;
        progressBar.style.width = percent + "%";
        currentTimeEl.innerText = formatTime(audio.currentTime);
    });

    audio.addEventListener('ended', () => {
        if (isRepeat) {
            audio.currentTime = 0;
            audio.play();
        } else {
            nextSong();
        }
    });

    progressBox.addEventListener('click', (e) => {
        if (!isFinite(audio.duration) || audio.duration === 0) return;

        const width = progressBox.clientWidth;
        const clickX = e.offsetX;
        audio.currentTime = (clickX / width) * audio.duration;
    });

    // âœ… metadata tek event: her ÅŸarkÄ±da tekrar tekrar addEventListener yapmayalÄ±m
    audio.addEventListener('loadedmetadata', () => {
        durationEl.innerText = formatTime(audio.duration);
    });

    /* ========================= */
    /* âœ… PLAYLIST PANEL LOGIC   */
    /* ========================= */

    function openPlaylist() {
        playlistPanel.classList.add('show');
        overlayLock.classList.add('show');
    }

    function closePlaylist() {
        playlistPanel.classList.remove('show');
        overlayLock.classList.remove('show');
    }

    openPlaylistBtn.addEventListener('click', openPlaylist);
    closePlaylistBtn.addEventListener('click', closePlaylist);
    overlayLock.addEventListener('click', closePlaylist);

    function renderPlaylist() {
        playlistListEl.innerHTML = "";

        playlist.forEach((song, i) => {
            const row = document.createElement("div");
            row.className = "pl-item";
            row.dataset.index = i;

            row.innerHTML = `
                <img src="${song.img}" alt="">
                <div class="pl-text">
                    <div class="t">${song.title}</div>
                    <div class="a">${song.artist}</div>
                </div>
                <i class="fas fa-play" style="opacity:.65;"></i>
            `;

            row.addEventListener("click", () => {
                index = i;
                loadSong(playlist[index]);
                audio.play();
                playIcon.className = "fas fa-pause";
                closePlaylist();
            });

            playlistListEl.appendChild(row);
        });

        setActivePlaylistItem();
    }

    function setActivePlaylistItem() {
        const items = playlistListEl.querySelectorAll(".pl-item");
        items.forEach((el) => {
            const i = Number(el.dataset.index);
            el.classList.toggle("active", i === index);
        });
    }

    // Ä°lk ÅarkÄ±yÄ± YÃ¼kle + Playlistâ€™i Ã§iz
    loadSong(playlist[index]);
    renderPlaylist();
</script>

</body>
</html>



