<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="robots" content="noindex, nofollow">

    <title>Selenify</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

    <style>
        * { box-sizing: border-box; -webkit-tap-highlight-color: transparent; }

        body, html {
            margin: 0; padding: 0;
            width: 100%;
            height: 100%;
            font-family: 'Segoe UI', sans-serif;
            color: white;
            overflow: hidden;
            position: fixed;
            overscroll-behavior: none;
            background: #000; /* Arka plan yüklenirken siyah görünsün */
        }

        .background {
            position: fixed; top: 0; left: 0;
            width: 100%; height: 100%;
            background-repeat: no-repeat;
            background-position: center center;
            background-size: cover;
            z-index: -1;
            transition: background-image 0.8s ease-in-out, opacity 0.8s ease;
            filter: brightness(0.6);
        }

        .container {
            display: flex; flex-direction: column;
            align-items: center; justify-content: center;
            height: 100vh;
            height: 100dvh;
            background: rgba(0, 0, 0, 0.3);
            padding: 20px;
        }

        .album-box {
            width: 80vw;
            max-width: 320px;
            aspect-ratio: 1 / 1;
            border: 1px solid rgba(255, 255, 255, 0.2);
            padding: 8px;
            margin-bottom: 25px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.6);
            background: rgba(255,255,255,0.05);
        }

        .album-art {
            width: 100%; height: 100%;
            background-size: cover; background-position: center;
            border-radius: 2px;
            transition: background-image 0.5s ease-in-out;
        }

        .player-wrapper {
            width: 100%;
            max-width: 400px;
            text-align: center;
        }

        .song-info h2 { margin: 0; font-size: 24px; font-weight: 600; text-shadow: 0 2px 10px rgba(0,0,0,0.8); }
        .song-info p { margin: 5px 0 25px; opacity: 0.7; font-size: 17px; }

        .progress-container {
            display: flex; align-items: center;
            font-size: 13px; margin-bottom: 30px; gap: 12px;
            padding: 0 5px;
        }

        .progress-bar-bg {
            flex: 1; height: 5px; background: rgba(255, 255, 255, 0.2);
            border-radius: 3px; cursor: pointer; position: relative;
        }

        #progress {
            height: 100%; background: #1DB954; width: 0%;
            border-radius: 3px; position: relative;
            transition: width 0.1s linear;
        }

        .controls {
            display: flex; justify-content: space-between; align-items: center;
            width: 100%; padding: 0 5px;
        }

        .btn {
            background: none; border: none; color: white;
            cursor: pointer; font-size: 24px; opacity: 0.8;
            transition: 0.2s;
        }

        .play-pause-btn {
            width: 70px; height: 70px;
            background: white; color: black !important;
            border-radius: 50%; font-size: 28px;
            display: flex; justify-content: center; align-items: center;
            box-shadow: 0 4px 15px rgba(0,0,0,0.3);
        }

        .btn.active { color: #1DB954; opacity: 1; }

        .footer-icons {
            display: flex; justify-content: space-between;
            width: 100%; margin-top: 35px; opacity: 0.5; font-size: 20px;
        }

        /* Playlist Panel */
        .playlist-panel {
            position: fixed; left: 0; right: 0; bottom: -100%;
            height: 70%; background: rgba(15,15,15,0.95);
            backdrop-filter: blur(20px); -webkit-backdrop-filter: blur(20px);
            border-radius: 22px 22px 0 0; z-index: 9999;
            transition: bottom 0.4s cubic-bezier(0.25, 1, 0.5, 1);
            padding: 20px; overflow: hidden;
        }
        .playlist-panel.show { bottom: 0; }

        .playlist-header {
            display: flex; align-items: center; justify-content: space-between;
            font-size: 18px; font-weight: 600; margin-bottom: 15px;
        }

        .playlist-list {
            height: calc(100% - 50px); overflow-y: auto;
            padding-right: 5px;
        }

        .pl-item {
            display: flex; align-items: center; gap: 12px;
            padding: 12px 8px; border-bottom: 1px solid rgba(255,255,255,0.05);
            cursor: pointer; border-radius: 8px; transition: 0.2s;
        }
        .pl-item:active { background: rgba(255,255,255,0.1); }
        .pl-item img { width: 48px; height: 48px; border-radius: 4px; object-fit: cover; }
        .pl-text .t { font-weight: 600; font-size: 15px; }
        .pl-text .a { opacity: 0.6; font-size: 13px; }
        .pl-item.active { color: #1DB954; background: rgba(29, 185, 84, 0.1); }

        .overlay-lock {
            position: fixed; inset: 0; background: rgba(0,0,0,0.5);
            z-index: 9998; opacity: 0; pointer-events: none; transition: 0.3s;
        }
        .overlay-lock.show { opacity: 1; pointer-events: auto; }
    </style>
</head>
<body>

<div class="background" id="bg-layer"></div>
<audio id="main-audio" preload="auto"></audio>

<div class="container">
    <div class="album-box">
        <div id="art" class="album-art"></div>
    </div>

    <div class="player-wrapper">
        <div class="song-info">
            <h2 id="title">Yükleniyor...</h2>
            <p id="artist">Lütfen bekleyin</p>
        </div>

        <div class="progress-container">
            <span id="current-time">0:00</span>
            <div class="progress-bar-bg" id="progress-box">
                <div id="progress"></div>
            </div>
            <span id="duration">0:00</span>
        </div>

        <div class="controls">
            <button class="btn" id="shuffleBtn"><i class="fas fa-random"></i></button>
            <button class="btn" onclick="prevSong()"><i class="fas fa-step-backward"></i></button>
            <button class="btn play-pause-btn" onclick="togglePlay()">
                <i id="playIcon" class="fas fa-play"></i>
            </button>
            <button class="btn" onclick="nextSong()"><i class="fas fa-step-forward"></i></button>
            <button class="btn" id="repeatBtn" onclick="toggleRepeat()"><i class="fas fa-redo"></i></button>
        </div>

        <div class="footer-icons">
            <i class="fas fa-laptop"></i>
            <i id="openPlaylistBtn" class="fas fa-list-ul" style="cursor:pointer"></i>
        </div>
    </div>
</div>

<div id="overlayLock" class="overlay-lock"></div>
<div id="playlistPanel" class="playlist-panel">
    <div class="playlist-header">
        <span>Sıradaki Şarkılar</span>
        <i id="closePlaylistBtn" class="fas fa-times" style="cursor:pointer"></i>
    </div>
    <div id="playlistList" class="playlist-list"></div>
</div>

<script>
    const audio = document.getElementById('main-audio');
    const playIcon = document.getElementById('playIcon');
    const progressBar = document.getElementById('progress');
    const progressBox = document.getElementById('progress-box');
    const repeatBtn = document.getElementById('repeatBtn');
    const backgroundEl = document.getElementById('bg-layer');
    const artEl = document.getElementById('art');
    const currentTimeEl = document.getElementById('current-time');
    const durationEl = document.getElementById('duration');
    const playlistPanel = document.getElementById('playlistPanel');
    const playlistListEl = document.getElementById('playlistList');
    const openPlaylistBtn = document.getElementById('openPlaylistBtn');
    const closePlaylistBtn = document.getElementById('closePlaylistBtn');
    const overlayLock = document.getElementById('overlayLock');

    let isRepeat = false;
    let index = 0;

    const playlist = [
        { title: "Sen", artist: "24.06.2025", img: "images/img3.jpeg", bg: "images/image1.png", src: "music/sarki1.mp3" },
        { title: "Hayatım", artist: "02.12.2025", img: "images/img2.jpeg", bg: "images/image2.png", src: "music/sarki2.mp3" },
        { title: "Boyunca", artist: "19.08.2025", img: "images/img1.jpeg", bg: "images/image3.png", src: "music/sarki3.mp3" },
        { title: "Duyduğum", artist: "06.01.2026", img: "images/img4.jpeg", bg: "images/image4.png", src: "music/sarki4.mp3" },
        { title: "Dinlemekten", artist: "01.01.2026", img: "images/img5.jpeg", bg: "images/image5.png", src: "music/sarki5.mp3" },
        { title: "Hiç", artist: "27.12.2025", img: "images/img6.jpeg", bg: "images/image6.png", src: "music/sarki6.mp3" },
        { title: "Vazgeçmeyeceğim", artist: "02.12.2025", img: "images/img7.jpeg", bg: "images/image7.png", src: "music/sarki7.mp3" },
        { title: "En", artist: "19.08.2025", img: "images/img8.jpeg", bg: "images/image8.png", src: "music/sarki8.mp3" },
        { title: "Güzel", artist: "22.09.2025", img: "images/img9.jpeg", bg: "images/image9.png", src: "music/sarki9.mp3" },
        { title: "Sen benim hayatım boyunca duyduğum dinlemekten hiç vazgeçmeyeceğim en güzel şarkısın", artist: "", img: "images/img10.jpeg", bg: "images/image10.png", src: "music/sarki10.m4a" },
    ];

    // --- HIZLANDIRMA: RESİMLERİ ÖNCEDEN YÜKLE ---
    function preloadAssets() {
        playlist.forEach(song => {
            const img = new Image();
            img.src = song.img;
            const bg = new Image();
            bg.src = song.bg;
        });
    }

    function formatTime(sec) {
        if (!isFinite(sec) || sec < 0) return "0:00";
        const m = Math.floor(sec / 60);
        const s = Math.floor(sec % 60);
        return `${m}:${s < 10 ? '0' + s : s}`;
    }

    function loadSong(song) {
        // Yumuşak geçiş için opacity düşür
        artEl.style.opacity = "0.5";
        
        document.getElementById('title').innerText = song.title;
        document.getElementById('artist').innerText = song.artist;
        
        // Resimleri değiştir
        artEl.style.backgroundImage = `url('${song.img}')`;
        backgroundEl.style.backgroundImage = `url('${song.bg || "image.png"}')`;
        
        audio.src = song.src;
        audio.load(); // Şarkıyı yüklemeye zorla

        // Opacity geri yükselt
        setTimeout(() => { artEl.style.opacity = "1"; }, 100);

        progressBar.style.width = "0%";
        currentTimeEl.innerText = "0:00";
        setActivePlaylistItem();
    }

    function togglePlay() {
        if (audio.paused) {
            audio.play().catch(e => console.log("Lütfen sayfaya bir kez tıklayın."));
            playIcon.className = "fas fa-pause";
        } else {
            audio.pause();
            playIcon.className = "fas fa-play";
        }
    }

    function nextSong() {
        index = (index + 1) % playlist.length;
        loadSong(playlist[index]);
        audio.play();
        playIcon.className = "fas fa-pause";
    }

    function prevSong() {
        index = (index - 1 + playlist.length) % playlist.length;
        loadSong(playlist[index]);
        audio.play();
        playIcon.className = "fas fa-pause";
    }

    function toggleRepeat() {
        isRepeat = !isRepeat;
        repeatBtn.classList.toggle('active', isRepeat);
    }

    audio.addEventListener('timeupdate', () => {
        if (!isFinite(audio.duration) || audio.duration === 0) return;
        const percent = (audio.currentTime / audio.duration) * 100;
        progressBar.style.width = percent + "%";
        currentTimeEl.innerText = formatTime(audio.currentTime);
    });

    audio.addEventListener('loadedmetadata', () => {
        durationEl.innerText = formatTime(audio.duration);
    });

    audio.addEventListener('ended', () => {
        isRepeat ? audio.play() : nextSong();
    });

    progressBox.addEventListener('click', (e) => {
        const width = progressBox.clientWidth;
        const clickX = e.offsetX;
        audio.currentTime = (clickX / width) * audio.duration;
    });

    // Playlist Fonksiyonları
    function renderPlaylist() {
        playlistListEl.innerHTML = "";
        playlist.forEach((song, i) => {
            const row = document.createElement("div");
            row.className = `pl-item ${i === index ? 'active' : ''}`;
            row.innerHTML = `
                <img src="${song.img}">
                <div class="pl-text">
                    <div class="t">${song.title}</div>
                    <div class="a">${song.artist}</div>
                </div>
            `;
            row.onclick = () => {
                index = i;
                loadSong(playlist[index]);
                togglePlay();
                closePlaylist();
            };
            playlistListEl.appendChild(row);
        });
    }

    function setActivePlaylistItem() {
        const items = document.querySelectorAll(".pl-item");
        items.forEach((item, i) => {
            item.classList.toggle("active", i === index);
        });
    }

    function openPlaylist() { playlistPanel.classList.add('show'); overlayLock.classList.add('show'); }
    function closePlaylist() { playlistPanel.classList.remove('show'); overlayLock.classList.remove('show'); }

    openPlaylistBtn.onclick = openPlaylist;
    closePlaylistBtn.onclick = closePlaylist;
    overlayLock.onclick = closePlaylist;

    // Başlat
    window.onload = () => {
        preloadAssets();
        loadSong(playlist[index]);
        renderPlaylist();
    };
</script>

</body>
</html>


